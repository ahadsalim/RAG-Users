# ğŸ“š Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¬Ø§Ù…Ø¹ Ù¾Ø±ÙˆÚ˜Ù‡ ØªØ¬Ø§Ø±Øª Ú†Øª

---

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

1. [Ù…Ø¹Ø±ÙÛŒ Ù¾Ø±ÙˆÚ˜Ù‡](#Ù…Ø¹Ø±ÙÛŒ-Ù¾Ø±ÙˆÚ˜Ù‡)
2. [Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…](#Ù…Ø¹Ù…Ø§Ø±ÛŒ-Ø³ÛŒØ³ØªÙ…)
3. [Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡](#Ø³Ø§Ø®ØªØ§Ø±-Ù¾Ø±ÙˆÚ˜Ù‡)
4. [Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ](#Ù†ØµØ¨-Ùˆ-Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ)
5. [ØªÙ†Ø¸ÛŒÙ…Ø§Øª Environment](#ØªÙ†Ø¸ÛŒÙ…Ø§Øª-environment)
6. [Ø³ÛŒØ³ØªÙ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª](#Ø³ÛŒØ³ØªÙ…-Ø§Ø­Ø±Ø§Ø²-Ù‡ÙˆÛŒØª)
7. [ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Core RAG](#ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ-Ø¨Ø§-core-rag)
8. [API Documentation](#api-documentation)
9. [Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÛŒØ³ØªÙ…](#Ù…Ø¯ÛŒØ±ÛŒØª-Ø³ÛŒØ³ØªÙ…)
10. [Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ](#Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ)
11. [Ø§Ù…Ù†ÛŒØª](#Ø§Ù…Ù†ÛŒØª)

---

## ğŸ¯ Ù…Ø¹Ø±ÙÛŒ Ù¾Ø±ÙˆÚ˜Ù‡

**ØªØ¬Ø§Ø±Øª Ú†Øª** ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø± Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ùˆ RAG (Retrieval-Augmented Generation)ØŒ Ø®Ø¯Ù…Ø§Øª Ú†Øªâ€ŒØ¨Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±Ù‡Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

### ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ:
- âœ… Ø³ÛŒØ³ØªÙ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ú†Ù†Ø¯Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ (OTPØŒ Email Verification)
- âœ… Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (Ø­Ù‚ÛŒÙ‚ÛŒØŒ Ø­Ù‚ÙˆÙ‚ÛŒØŒ ØªØ¬Ø§Ø±ÛŒ)
- âœ… ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Core API (RAG System)
- âœ… Ø³ÛŒØ³ØªÙ… Ù¾Ø±Ø¯Ø§Ø®Øª (ZarinpalØŒ Stripe)
- âœ… Ø§Ø±Ø³Ø§Ù„ SMS (Kavenegar)
- âœ… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Bale Messenger
- âœ… WebSocket Ø¨Ø±Ø§ÛŒ Ú†Øª real-time
- âœ… Celery Ø¨Ø±Ø§ÛŒ task Ù‡Ø§ÛŒ async
- âœ… Multi-language support (ÙØ§Ø±Ø³ÛŒØŒ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ)

---

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…

### Technology Stack

**Backend:**
- Django 5.1 + Django REST Framework
- PostgreSQL 16
- Redis 7 (Cache & Session)
- RabbitMQ 3 (Message Broker)
- Celery (Task Queue)
- Daphne (ASGI Server)

**Frontend:**
- Next.js 14 (App Router)
- React 18
- TypeScript
- Tailwind CSS
- Zustand (State Management)
- Lucide Icons

**Infrastructure:**
- Docker & Docker Compose
- Nginx Proxy Manager
- Let's Encrypt SSL
- MinIO (Object Storage)

### Ù†Ù…ÙˆØ¯Ø§Ø± Ù…Ø¹Ù…Ø§Ø±ÛŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Internet                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Nginx Proxy Manager (SSL)                       â”‚
â”‚         tejarat.chat    admin.tejarat.chat                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend (3000)   â”‚         â”‚      Backend (8000)          â”‚
â”‚     Next.js 14      â”‚         â”‚   Django + DRF + Daphne      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                          â”‚                          â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  PostgreSQL 16  â”‚      â”‚     Redis 7         â”‚    â”‚   RabbitMQ 3      â”‚
           â”‚   (Database)    â”‚      â”‚  (Cache/Session)    â”‚    â”‚ (Message Broker)  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                         â”‚
                                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                               â”‚   Celery Worker   â”‚
                                                               â”‚  (Async Tasks)    â”‚
                                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚    Core RAG API     â”‚
                                    â”‚ core.tejarat.chat   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡

```
/srv/
â”œâ”€â”€ backend/                    # Django Backend
â”‚   â”œâ”€â”€ accounts/               # User management & Auth
â”‚   â”‚   â”œâ”€â”€ models.py           # User, OTP models
â”‚   â”‚   â”œâ”€â”€ views.py            # Auth views
â”‚   â”‚   â”œâ”€â”€ serializers.py      # DRF serializers
â”‚   â”‚   â””â”€â”€ utils.py            # SMS, Email utilities
â”‚   â”œâ”€â”€ chat/                   # Chat system
â”‚   â”‚   â”œâ”€â”€ models.py           # Conversation, Message
â”‚   â”‚   â”œâ”€â”€ views.py            # Query views
â”‚   â”‚   â”œâ”€â”€ core_service.py     # Core RAG integration
â”‚   â”‚   â”œâ”€â”€ upload_views.py     # File upload
â”‚   â”‚   â””â”€â”€ signals.py          # Delete signals
â”‚   â”œâ”€â”€ core/                   # Core settings
â”‚   â”‚   â”œâ”€â”€ settings.py         # Django settings
â”‚   â”‚   â”œâ”€â”€ urls.py             # URL routing
â”‚   â”‚   â””â”€â”€ storage.py          # MinIO service
â”‚   â”œâ”€â”€ payments/               # Payment integration
â”‚   â”‚   â”œâ”€â”€ models.py           # Transaction model
â”‚   â”‚   â””â”€â”€ views.py            # Payment views
â”‚   â”œâ”€â”€ subscriptions/          # Subscription system
â”‚   â”‚   â”œâ”€â”€ models.py           # Plan, Subscription
â”‚   â”‚   â””â”€â”€ usage.py            # Usage tracking
â”‚   â””â”€â”€ templates/              # Email templates
â”œâ”€â”€ frontend/                   # Next.js Frontend
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ app/                # Pages (App Router)
â”‚       â”‚   â”œâ”€â”€ auth/           # Login, Register
â”‚       â”‚   â”œâ”€â”€ chat/           # Chat page
â”‚       â”‚   â””â”€â”€ checkout/       # Payment checkout
â”‚       â”œâ”€â”€ components/         # React components
â”‚       â”œâ”€â”€ lib/                # Utilities
â”‚       â””â”€â”€ store/              # Zustand stores
â”œâ”€â”€ deployment/                 # Docker configs
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ Dockerfile.backend
â”‚   â”œâ”€â”€ Dockerfile.frontend
â”‚   â”œâ”€â”€ manager.sh              # Management script
â”‚   â””â”€â”€ .env                    # Environment variables
â””â”€â”€ documents/                  # Documentation
```

---

## ğŸš€ Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

### Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§

**Ø³Ø±ÙˆØ±:**
- OS: Ubuntu 20.04+ / Debian 11+
- RAM: Ø­Ø¯Ø§Ù‚Ù„ 4GB (ØªÙˆØµÛŒÙ‡: 8GB+)
- Storage: Ø­Ø¯Ø§Ù‚Ù„ 50GB
- CPU: 2 Core+ (ØªÙˆØµÛŒÙ‡: 4 Core+)

**Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø±Ù‡Ø§:**
```bash
# Ù†ØµØ¨ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# Ù†ØµØ¨ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

### Ù…Ø±Ø§Ø­Ù„ Ù†ØµØ¨

#### 1. Clone Repository
```bash
cd /srv
git clone <repository-url> .
```

#### 2. ØªÙ†Ø¸ÛŒÙ… Environment Variables
```bash
cd /srv/deployment
cp .env.example .env
nano .env
```

#### 3. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Docker
```bash
docker-compose up -d
```

#### 4. Ø§Ø¬Ø±Ø§ÛŒ Migrations
```bash
./manager.sh migrate
```

#### 5. Ø§ÛŒØ¬Ø§Ø¯ Superuser
```bash
./manager.sh
# Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø²ÛŒÙ†Ù‡ 8
```

---

## âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Environment

### Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ

```env
# Database
DB_NAME=tejarat_db
DB_USER=tejarat_user
DB_PASSWORD=<STRONG_PASSWORD>

# Django
SECRET_KEY=<DJANGO_SECRET_KEY>
DEBUG=false
ALLOWED_HOSTS=tejarat.chat,admin.tejarat.chat

# Email (Gmail SMTP)
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=<APP_PASSWORD>
DEFAULT_FROM_EMAIL=noreply@tejarat.chat

# SMS (Kavenegar)
KAVENEGAR_API_KEY=<YOUR_API_KEY>
KAVENEGAR_SENDER=<YOUR_SENDER_NUMBER>

# Core RAG API
RAG_CORE_BASE_URL=https://core.tejarat.chat
RAG_CORE_API_KEY=<YOUR_API_KEY>

# MinIO
MINIO_ENDPOINT=storage.tejarat.chat:9000
MINIO_ACCESS_KEY=<ACCESS_KEY>
MINIO_SECRET_KEY=<SECRET_KEY>
MINIO_BUCKET_NAME=shared-storage
MINIO_USE_SSL=true

# Frontend
FRONTEND_URL=https://tejarat.chat
NEXT_PUBLIC_API_URL=https://admin.tejarat.chat
```

---

## ğŸ” Ø³ÛŒØ³ØªÙ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª

### Ø§Ù†ÙˆØ§Ø¹ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†

| Ù†ÙˆØ¹ | Ø±ÙˆØ´ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª | ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ |
|-----|----------------|----------|
| Ø­Ù‚ÛŒÙ‚ÛŒ (Individual) | Ù…ÙˆØ¨Ø§ÛŒÙ„ + OTP | Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ + Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± |
| Ø­Ù‚ÙˆÙ‚ÛŒ (Legal) | Ø§ÛŒÙ…ÛŒÙ„ + ØªØ§ÛŒÛŒØ¯ | Ø§ÛŒÙ…ÛŒÙ„ + Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ |
| ØªØ¬Ø§Ø±ÛŒ (Business) | Ø§ÛŒÙ…ÛŒÙ„ + ØªØ§ÛŒÛŒØ¯ | Ù…Ø´Ø§Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ Ø¨Ø§ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø¨ÛŒØ´ØªØ± |

### ÙØ±Ø¢ÛŒÙ†Ø¯ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…

**Ú©Ø§Ø±Ø¨Ø± Ø­Ù‚ÛŒÙ‚ÛŒ:**
```
Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… â†’ OTP (SMS) â†’ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ â†’ ÙˆØ±ÙˆØ¯
```

**Ú©Ø§Ø±Ø¨Ø± Ø­Ù‚ÙˆÙ‚ÛŒ:**
```
Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… â†’ Ø§ÛŒÙ…ÛŒÙ„ ØªØ§ÛŒÛŒØ¯ â†’ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© â†’ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ â†’ ÙˆØ±ÙˆØ¯
```

### ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ
- âœ… JWT Token Authentication
- âœ… Rate Limiting (OTPØŒ Login)
- âœ… Password Validators (Persian messages)
- âœ… Session Management
- âœ… Audit Logging
- âœ… CORS Protection

---

## ğŸ”— ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Core RAG

### Ø§Ø±Ø³Ø§Ù„ Query

**Endpoint:** `POST https://core.tejarat.chat/api/v1/query/`

```json
{
  "query": "Ù…ØªÙ† Ø³ÙˆØ§Ù„",
  "language": "fa",
  "conversation_id": "uuid",
  "file_attachments": [
    {
      "filename": "document.pdf",
      "minio_url": "temp_uploads/user/file.pdf",
      "file_type": "application/pdf"
    }
  ]
}
```

### Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Conversation

ÙˆÙ‚ØªÛŒ ÛŒÚ© Conversation Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø² Core RAG Ù†ÛŒØ² Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯:

```python
@receiver(pre_delete, sender=Conversation)
def delete_conversation_from_rag_core(sender, instance, **kwargs):
    if instance.rag_conversation_id:
        core_service.delete_conversation(
            conversation_id=instance.rag_conversation_id,
            token=access_token
        )
```

---

## ğŸ“¡ API Documentation

### Base URLs
- **Production:** `https://admin.tejarat.chat/api/v1/`
- **Development:** `http://localhost:8000/api/v1/`

### Authentication Endpoints

| Method | Endpoint | ØªÙˆØ¶ÛŒØ­ |
|--------|----------|-------|
| POST | `/auth/register/` | Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… |
| POST | `/auth/login/` | ÙˆØ±ÙˆØ¯ |
| POST | `/auth/otp/request/` | Ø¯Ø±Ø®ÙˆØ§Ø³Øª OTP |
| POST | `/auth/otp/verify/` | ØªØ§ÛŒÛŒØ¯ OTP |
| POST | `/auth/forgot-password/` | ÙØ±Ø§Ù…ÙˆØ´ÛŒ Ø±Ù…Ø² |
| POST | `/auth/reset-password/` | Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø±Ù…Ø² |

### Chat Endpoints

| Method | Endpoint | ØªÙˆØ¶ÛŒØ­ |
|--------|----------|-------|
| GET | `/chat/conversations/` | Ù„ÛŒØ³Øª Ù…Ú©Ø§Ù„Ù…Ø§Øª |
| POST | `/chat/query/` | Ø§Ø±Ø³Ø§Ù„ Ø³ÙˆØ§Ù„ |
| POST | `/chat/upload/` | Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ |
| DELETE | `/chat/conversations/{id}/` | Ø­Ø°Ù Ù…Ú©Ø§Ù„Ù…Ù‡ |

### Subscription Endpoints

| Method | Endpoint | ØªÙˆØ¶ÛŒØ­ |
|--------|----------|-------|
| GET | `/subscriptions/plans/` | Ù„ÛŒØ³Øª Ù¾Ù„Ù†â€ŒÙ‡Ø§ |
| GET | `/subscriptions/usage/stats/` | Ø¢Ù…Ø§Ø± Ù…ØµØ±Ù |
| POST | `/payments/create/` | Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øª |

---

## ğŸ”§ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÛŒØ³ØªÙ…

### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Manager Script

```bash
cd /srv/deployment
./manager.sh
```

**Ø¯Ø³ØªÙˆØ±Ø§Øª:**
```bash
./manager.sh start          # Ø´Ø±ÙˆØ¹ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
./manager.sh stop           # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
./manager.sh restart        # Ø±ÛŒâ€ŒØ§Ø³ØªØ§Ø±Øª
./manager.sh status         # ÙˆØ¶Ø¹ÛŒØª
./manager.sh logs           # Ù„Ø§Ú¯â€ŒÙ‡Ø§
./manager.sh migrate        # Ø§Ø¬Ø±Ø§ÛŒ migrations
./manager.sh cache          # Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† cache
./manager.sh rebuild-frontend  # Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ frontend
./manager.sh health         # Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù„Ø§Ù…Øª
```

### Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯

```bash
# ÙˆØ¶Ø¹ÛŒØª Containers
docker ps
docker-compose ps

# Ù„Ø§Ú¯â€ŒÙ‡Ø§
docker-compose logs -f backend
docker-compose logs -f frontend

# Ù…Ù†Ø§Ø¨Ø¹
docker stats
```

---

## ğŸ› Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬

#### 1. Backend Ø´Ø±ÙˆØ¹ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
```bash
docker-compose logs backend
docker-compose restart backend
```

#### 2. Ø®Ø·Ø§ÛŒ CORS
- CORS ÙÙ‚Ø· Ø¯Ø± Django ØªÙ†Ø¸ÛŒÙ… Ø´ÙˆØ¯
- Ø§Ø² NPM Ø­Ø°Ù Ú©Ù†ÛŒØ¯

#### 3. Email Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
```bash
docker exec app_backend python manage.py shell
>>> from django.core.mail import send_mail
>>> send_mail('Test', 'Test', 'from@example.com', ['to@example.com'])
```

#### 4. OTP Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
```bash
./manager.sh cache  # Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† rate limit
```

#### 5. Ø®Ø·Ø§ÛŒ 502 Ø§Ø² Core RAG
- Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³ Core
- Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§

---

## ğŸ”’ Ø§Ù…Ù†ÛŒØª

### Checklist

- [ ] `DEBUG=false` Ø¯Ø± production
- [ ] `SECRET_KEY` ØªØºÛŒÛŒØ± Ú©Ø±Ø¯Ù‡
- [ ] Ø±Ù…Ø²Ù‡Ø§ÛŒ Ù‚ÙˆÛŒ Ø¨Ø±Ø§ÛŒ database
- [ ] SSL ÙØ¹Ø§Ù„ Ø§Ø³Øª
- [ ] Firewall ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡ (ÙÙ‚Ø· 80, 443, 22)
- [ ] Backup Ù…Ù†Ø¸Ù…
- [ ] Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ù…Ø§Ù†ÛŒØªÙˆØ± Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯

### Firewall

```bash
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

### Backup

```bash
# Database
docker-compose exec postgres pg_dump -U tejarat_user tejarat_db > backup.sql

# Restore
docker-compose exec -T postgres psql -U tejarat_user tejarat_db < backup.sql
```

---

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

- **Website:** https://tejarat.chat
- **Email:** info@tejarat.chat

---

**Ù†Ø³Ø®Ù‡:** 1.0.0  
**Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ:** 2025-12-15
