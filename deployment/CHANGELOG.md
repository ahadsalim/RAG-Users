# ุชุบุฑุงุช ูุณุฎู ูุตุจ

## ูุณุฎู 2.1 - ุงุตูุงุญุงุช ุจุฑุง ูุตุจ ุฑู ุณุฑูุฑ ุฌุฏุฏ

ุชุงุฑุฎ: 2025-11-11

### ๐ง ุงุตูุงุญุงุช ุงุณฺฉุฑูพุช start.sh

#### ูุดฺฉูุงุช ุจุฑุทุฑู ุดุฏู:

1. **ูุชุบุฑูุง ุชุนุฑู ูุดุฏู ุฏุฑ credentials.txt**
   - โ ุงุถุงูู ุดุฏู `DB_NAME="app_db"`
   - โ ุงุถุงูู ุดุฏู `DB_USER="app_user"`
   - โ ุงุถุงูู ุดุฏู `RABBITMQ_USER="app"`
   - ุงู ูุชุบุฑูุง ุฏุฑ ุณุงุฎุช ูุงู credentials.txt ุงุณุชูุงุฏู ูโุดุฏูุฏ ูู ุชุนุฑู ูุดุฏู ุจูุฏูุฏ

2. **ูุดฺฉู ุฎูุงูุฏู ADMIN_EMAIL**
   - โ ูุจูุงู: ุงุฒ ูุชุบุฑ ูุญู ุงุณุชูุงุฏู ูโฺฉุฑุฏ ฺฉู ููฺฉู ุจูุฏ ุฎุงู ุจุงุดุฏ
   - โ ุญุงูุง: ููุฏุงุฑ ุฑุง ุงุฒ ูุงู `.env` ูโุฎูุงูุฏ
   - ฺฉุฏ ุฌุฏุฏ: `ADMIN_EMAIL_FROM_ENV=$(grep ADMIN_EMAIL "$ENV_FILE" | cut -d'=' -f2)`

3. **ูุดฺฉู ูุณุฑ .env ุฏุฑ backup script**
   - โ ูุจูุงู: `/srv/.env` (ุงุดุชุจุงู)
   - โ ุญุงูุง: `/srv/deployment/.env` (ุตุญุญ)

4. **ุฏุณุชูุฑ backup Redis ุงุดุชุจุงู**
   - โ ูุจูุงู: `docker exec app_redis redis-cli --rdb "path"` (ุงุดุชุจุงู)
   - โ ุญุงูุง: ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ `SAVE` ู ฺฉูพ ฺฉุฑุฏู ูุงู `dump.rdb`
   - ุงูุฒูุฏู ุดุฏู ุฎุทุงูุง ููุตูโุชุฑ ุจุฑุง backup

5. **ุนุฏู ุงูุชุธุงุฑ ุจุฑุง ุขูุงุฏู ุดุฏู Nginx Proxy Manager**
   - โ ุงุถุงูู ุดุฏู loop ุจุฑุง ฺฺฉ ฺฉุฑุฏู healthcheck
   - โ ุญุฏุงฺฉุซุฑ 60 ุซุงูู (30 ุจุงุฑ ร 2 ุซุงูู) ููุชุธุฑ ูโูุงูุฏ
   - โ ูพุงูโูุง ูุงุถุญโุชุฑ ุจุฑุง ฺฉุงุฑุจุฑ

6. **ุจูโุฑูุฒุฑุณุงู ฺฉุงูู ูุชุบุฑูุง .env**
   - โ ุงุถุงูู ุดุฏู `DB_NAME` ู `DB_USER`
   - โ ุงุถุงูู ุดุฏู `RABBITMQ_USER`
   - โ ุงุถุงูู ุดุฏู `NPM_ADMIN_EMAIL`
   - โ ุจูโุฑูุฒุฑุณุงู `REDIS_URL` ุจุง password
   - โ ุจูโุฑูุฒุฑุณุงู `CACHE_URL` ุจุง password
   - โ ุจูโุฑูุฒุฑุณุงู `CELERY_BROKER_URL` ุจุง credentials ุตุญุญ

### ๐ณ ุงุตูุงุญุงุช docker-compose.yml

#### ูพุดุชุจุงู ฺฉุงูู ุงุฒ Redis Password:

1. **ุณุฑูุณ Redis**
   - โ ูพุดุชุจุงู ุงุฒ ูุชุบุฑ `REDIS_PASSWORD`
   - โ ุงฺฏุฑ password ุชูุธู ุดุฏู ุจุงุดุฏุ ุจุง `--requirepass` ุงุนูุงู ูโุดูุฏ
   - โ healthcheck ุจูโุฑูุฒ ุดุฏู ุจุฑุง ุงุณุชูุงุฏู ุงุฒ password ุฏุฑ ุตูุฑุช ูุฌูุฏ

2. **ุณุฑูุณ Backend**
   - โ ุงุถุงูู ุดุฏู `REDIS_PASSWORD` ุจู environment variables
   - โ ุงุณุชูุงุฏู ุงุฒ `REDIS_URL` ู `CACHE_URL` ุงุฒ `.env`

3. **ุณุฑูุณโูุง Celery (Worker & Beat)**
   - โ ุงุถุงูู ุดุฏู `REDIS_PASSWORD` ุจู environment variables
   - โ ุงุณุชูุงุฏู ุงุฒ `REDIS_URL` ู `CACHE_URL` ุงุฒ `.env`

### ๐ ุงุตูุงุญุงุช backend/core/settings.py

#### ูพุดุชุจุงู ฺฉุงูู ุงุฒ Redis ุจุง Password:

1. **Channels Layer (WebSocket)**
   - โ ุณุงุฎุช `CHANNEL_REDIS_URL` ุจุง password (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
   - โ ุงุณุชูุงุฏู ุงุฒ URL ฺฉุงูู ุจู ุฌุง tuple

2. **Cache Configuration**
   - โ ุงุณุชูุงุฏู ุงุฒ `CACHE_URL` ุงุฒ environment
   - โ Fallback ุจู ุณุงุฎุช URL ุจุง password
   - โ ูพุดุชุจุงู ฺฉุงูู ุงุฒ ุญุงูุช ุจุฏูู password

### ๐ ุงุตูุงุญุงุช .env.example

1. **ูุชุบุฑูุง ุฌุฏุฏ**
   - โ ุงุถุงูู ุดุฏู `BACKEND_URL` ุจุฑุง Next.js SSR
   - โ ุงุถุงูู ุดุฏู `BALE_CLIENT_ID`
   - โ ุงุถุงูู ุดุฏู `BALE_CLIENT_SECRET`

### ๐ ูุณุชูุฏุงุช ุฌุฏุฏ

1. **INSTALLATION_GUIDE.md**
   - โ ุฑุงูููุง ฺฉุงูู ูุตุจ ูุฏู ุจู ูุฏู
   - โ ุชูุถุญุงุช ุนุจโุงุจ
   - โ ุฏุณุชูุฑุงุช ููุฏ
   - โ ูฺฉุงุช ุงููุช

2. **CHANGELOG.md**
   - โ ูุณุชูุฏุณุงุฒ ฺฉุงูู ุชุบุฑุงุช
   - โ ุชูุถุญุงุช ูู ุจุฑุง ูุฑ ุชุบุฑ

---

## ุขูุงุฏูโุณุงุฒ ุจุฑุง ูุตุจ ุฑู ุณุฑูุฑ ุฌุฏุฏ

### โ ฺฺฉโูุณุช ููุง

- [x] ุงุณฺฉุฑูพุช start.sh ฺฉุงูู ู ุจุฏูู ุจุงฺฏ ุงุณุช
- [x] docker-compose.yml ุจูโุฑูุฒ ุดุฏู
- [x] settings.py ุจุฑุง Redis password ุขูุงุฏู ุงุณุช
- [x] .env.example ฺฉุงูู ุงุณุช
- [x] backup script ฺฉุงูู ู ุชุณุช ุดุฏู
- [x] ูุณุชูุฏุงุช ูุตุจ ุขูุงุฏู ุงุณุช

### ๐ฏ ุงูฺฉุงูุงุช ูุตุจ ุฎูุฏฺฉุงุฑ

ุงุณฺฉุฑูพุช `start.sh` ููุงุฑุฏ ุฒุฑ ุฑุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏ:

1. โ ุจุฑุฑุณ ุณุณุชูโุนุงูู ู ุฏุณุชุฑุณโูุง
2. โ ูุตุจ Docker ู Docker Compose
3. โ ูุตุจ ุงุจุฒุงุฑูุง ุถุฑูุฑ
4. โ ูพฺฉุฑุจูุฏ Firewall (UFW)
5. โ ุชููุฏ ูพุณูุฑุฏูุง ุงูู ุจุฑุง ุชูุงู ุณุฑูุณโูุง
6. โ ุงุฌุงุฏ ูุงู `.env` ุจุง ููุงุฏุฑ ุตุญุญ
7. โ ุฑุงูโุงูุฏุงุฒ PostgreSQL ุจุง healthcheck
8. โ ุฑุงูโุงูุฏุงุฒ Redis ุจุง ูพุดุชุจุงู password
9. โ ุฑุงูโุงูุฏุงุฒ RabbitMQ ุจุง credentials ุงูู
10. โ ุณุงุฎุช ู ุฑุงูโุงูุฏุงุฒ Backend (Django)
11. โ ุงุฌุฑุง migrations
12. โ ุฌูุนโุขูุฑ static files
13. โ ุงุฌุงุฏ superuser
14. โ ุฑุงูโุงูุฏุงุฒ Celery Worker ู Beat
15. โ ุฑุงูโุงูุฏุงุฒ Frontend (Next.js)
16. โ ุฑุงูโุงูุฏุงุฒ Nginx Proxy Manager
17. โ ุชูุธู backup ุฎูุฏฺฉุงุฑ ุฑูุฒุงูู
18. โ ุฐุฎุฑู ุงุทูุงุนุงุช ูุญุฑูุงูู ุฏุฑ ูุงู ุงูู

### ๐ ุงููุช

- ุชูุงู ูพุณูุฑุฏูุง ุจุง ุงูฺฏูุฑุชูโูุง ุงูู ุชููุฏ ูโุดููุฏ
- Redis ูโุชูุงูุฏ ุจุง password ูุญุงูุธุช ุดูุฏ
- ุชูุงู ุณุฑูุณโูุง database ููุท ุงุฒ localhost ูุงุจู ุฏุณุชุฑุณ ูุณุชูุฏ
- Firewall ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูพฺฉุฑุจูุฏ ูโุดูุฏ
- ูพูุฑุชโูุง ุบุฑุถุฑูุฑ ุจุณุชู ูุณุชูุฏ

### ๐ฆ Backup

- Backup ุฎูุฏฺฉุงุฑ ุฑูุฒุงูู ุฏุฑ ุณุงุนุช 2 ุตุจุญ
- ุดุงูู PostgreSQL, Redis, Media Files, Static Files ู .env
- ูฺฏูุฏุงุฑ 30 ุฑูุฒ ุงุฎุฑ
- ูุงุจู ุงุฌุฑุง ุฏุณุช

---

## ุงุฏุฏุงุดุชโูุง ุชูุณุนูโุฏููุฏู

### ุชุบุฑุงุช ุจุฑุง ุณุงุฒฺฏุงุฑ ุจุง ุณุฑูุฑ ุฌุฏุฏ

ุงู ูุณุฎู ุจู ุทูุฑ ุฎุงุต ุจุฑุง ูุตุจ ุชูุฒ (clean install) ุฑู ุณุฑูุฑ ุฌุฏุฏ ุทุฑุงุญ ุดุฏู ุงุณุช.

**ูฺฉุงุช ููู:**
- ุฏุงุฏูโูุง ุชุณุช ุงููุช ูุฏุงุฑูุฏ (ููุงูุทูุฑ ฺฉู ฺฉุงุฑุจุฑ ุงุนูุงู ฺฉุฑุฏ)
- ุชูุฑฺฉุฒ ุฑู ูุตุจ ุตุญุญ ู ฺฉุงูู ุงุณุช
- ุชูุงู ุณุฑูุณโูุง ุจุงุฏ ุจู ุฏุฑุณุช ุฑุงูโุงูุฏุงุฒ ุดููุฏ
- ุงุณฺฉุฑูพุช ุจุงุฏ idempotent ุจุงุดุฏ (ูุงุจู ุงุฌุฑุง ูุฌุฏุฏ)

### ุชุณุชโูุง ุงูุฌุงู ุดุฏู

- [x] ุจุฑุฑุณ syntax ุงุณฺฉุฑูพุช bash
- [x] ุจุฑุฑุณ ูุชุบุฑูุง ุชุนุฑู ุดุฏู
- [x] ุจุฑุฑุณ ูุณุฑูุง ูุงู
- [x] ุจุฑุฑุณ ุฏุณุชูุฑุงุช Docker
- [x] ุจุฑุฑุณ healthcheckโูุง
- [x] ุจุฑุฑุณ ุณุงุฒฺฏุงุฑ ุจุง Ubuntu/Debian

### ูุฏู ุจุนุฏ (ุชูุตู ูโุดูุฏ)

1. ุชุณุช ุงุณฺฉุฑูพุช ุฑู ฺฉ VM ุชูุฒ Ubuntu
2. ุจุฑุฑุณ ูุงฺฏโูุง ุฏุฑ ูุฑ ูุฑุญูู
3. ุชุณุช backup ู restore
4. ุชุณุช SSL ุจุง Let's Encrypt
5. ุชุณุช load balancing ู scaling

---

**ูุชุฌู**: ุณุณุชู ุขูุงุฏู ุจุฑุง ูุตุจ ุฑู ุณุฑูุฑ ุฌุฏุฏ ุงุณุช! ๐
