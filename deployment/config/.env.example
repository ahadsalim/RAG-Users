# ===========================
# تنظیمات اصلی سیستم
# ===========================

# Domain Configuration
DOMAIN=yourdomain.com
ADMIN_EMAIL=admin@yourdomain.com

# ===========================
# Database Configuration
# ===========================
DB_NAME=app_db
DB_USER=app_user
DB_PASSWORD=ChangeThisToStrongPassword2024!
DB_HOST=postgres
DB_PORT=5432

# ===========================
# Redis Configuration
# ===========================
REDIS_PASSWORD=ChangeThisRedisPassword2024!
REDIS_URL=redis://:ChangeThisRedisPassword2024!@redis:6379/0
CACHE_URL=redis://:ChangeThisRedisPassword2024!@redis:6379/1

# ===========================
# RabbitMQ Configuration
# ===========================
RABBITMQ_USER=app
RABBITMQ_PASSWORD=ChangeThisRabbitPassword2024!

# ===========================
# Django Settings
# ===========================
# Generate new secret key: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
# IMPORTANT: Use quotes if SECRET_KEY contains special characters like ; ] [ ? # <
SECRET_KEY="django-insecure-change-this-to-a-real-secret-key-in-production"
DEBUG=false
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com,www.yourdomain.com,admin.yourdomain.com

# Admin User
DJANGO_ADMIN_PASSWORD=ChangeThisAdminPassword2024!

# JWT Configuration (MUST match central system)
# IMPORTANT: Use quotes if JWT_SECRET_KEY contains special characters
JWT_SECRET_KEY="change-this-to-match-your-central-system-jwt-secret-key"
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_LIFETIME=60
JWT_REFRESH_TOKEN_LIFETIME=1440

# ===========================
# RAG Core API Configuration
# ===========================
# Use internal IP for DMZ network (faster, no internet dependency)
RAG_CORE_BASE_URL=http://10.10.10.20:7001
RAG_CORE_API_KEY=YOUR_REAL_RAG_API_KEY_HERE

# ===========================
# Email Configuration
# ===========================
# Gmail Example
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password
EMAIL_USE_TLS=true
DEFAULT_FROM_EMAIL=noreply@yourdomain.com
FRONTEND_URL=https://yourdomain.com

# SMTP Server Example
# EMAIL_HOST=mail.yourdomain.com
# EMAIL_PORT=465
# EMAIL_HOST_USER=noreply@yourdomain.com
# EMAIL_HOST_PASSWORD=your-email-password
# EMAIL_USE_SSL=true

# ===========================
# Payment Gateways
# ===========================

# Zarinpal
ZARINPAL_MERCHANT_ID=00000000-0000-0000-0000-000000000000
ZARINPAL_SANDBOX=false
ZARINPAL_CALLBACK_URL=https://yourdomain.com/api/v1/payments/zarinpal/callback/

# Stripe
STRIPE_PUBLIC_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxx
# IMPORTANT: Use quotes if STRIPE_SECRET_KEY contains special characters
STRIPE_SECRET_KEY="sk_test_xxxxxxxxxxxxxxxxxxxxx"
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxx

# Plisio Cryptocurrency Payment (Optional)
PLISIO_API_KEY=

# Cryptocurrency (Optional)
CRYPTO_WALLET_ADDRESS=
CRYPTO_API_KEY=

# ===========================
# Frontend Settings
# ===========================
# Leave empty for relative paths (recommended) or set to full URL
NEXT_PUBLIC_API_URL=
NEXT_PUBLIC_WS_URL=
# Backend URL for server-side Next.js API routes
BACKEND_URL=http://backend:8000

# ===========================
# Celery Configuration
# ===========================
CELERY_BROKER_URL=amqp://app:RABBITMQ_PASSWORD@rabbitmq:5672//
CELERY_RESULT_BACKEND=redis://redis:6379/2
CELERY_BEAT_SCHEDULE_FILENAME=/tmp/celerybeat-schedule

# ===========================
# Security Settings
# ===========================
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
SECURE_SSL_REDIRECT=false
SESSION_COOKIE_SECURE=false
CSRF_COOKIE_SECURE=false

# ===========================
# SMS Configuration (Kavenegar)
# ===========================
KAVENEGAR_API_KEY=your-kavenegar-api-key
KAVENEGAR_SENDER=your-default-sender-number

# ===========================
# Bale Messenger
# ===========================
BALE_USERNAME=your-bale-username
BALE_PASSWORD=your-bale-password

# ===========================
# Push Notification (Firebase)
# ===========================
FIREBASE_SERVER_KEY=
FCM_SERVER_KEY=
APNS_CERTIFICATE_PATH=
APNS_USE_SANDBOX=true

# ===========================
# Analytics & Monitoring
# ===========================
SENTRY_DSN=
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# ===========================
# Nginx Proxy Manager
# ===========================
NPM_DB_PASSWORD=ChangeThisNpmDbPassword2024!
NPM_ADMIN_EMAIL=admin@yourdomain.com
NPM_ADMIN_PASSWORD=ChangeThisAdminPassword2024!

# ===========================
# MinIO / S3 Configuration (برای آپلود فایل)
# ===========================
S3_ENDPOINT_URL=https://s3.yourdomain.com
S3_ACCESS_KEY_ID=your_minio_access_key
S3_SECRET_ACCESS_KEY=your_minio_secret_key
S3_REGION=us-east-1
S3_USE_SSL=true
# MinIO Buckets
# temp-userfile: فایل‌های موقت کاربران از سیستم Users
S3_TEMP_BUCKET=temp-userfile
# users-system: فایل‌های دائمی کاربران (پروفایل، تیکت)
S3_USERS_BUCKET=users-system

# ===========================
# Container Resource Limits
# ===========================
# Format: "memory_limit,cpu_limit" (e.g., "512m,0.5" = 512MB RAM, 50% of 1 CPU)
BACKEND_RESOURCES="1g,1.0"
FRONTEND_RESOURCES="512m,0.5"
POSTGRES_RESOURCES="1g,1.0"
REDIS_RESOURCES="256m,0.25"
RABBITMQ_RESOURCES="512m,0.5"

# ===========================
# Timezone & Locale
# ===========================
TZ=Asia/Tehran
LANGUAGE_CODE=fa-ir
TIME_ZONE=Asia/Tehran

# ===========================
# OTP Configuration
# ===========================
OTP_EXPIRE_SECONDS=120
KAVENEGAR_OTP_TEMPLATE=otp
KAVENEGAR_ADMIN_OTP_TEMPLATE=otpadmin

# ===========================
# Backup Server Configuration
# ===========================
# Remote backup server for automated backups
BACKUP_SERVER_HOST=backup.example.com
BACKUP_SERVER_USER=root
BACKUP_SERVER_PATH=/backup/users
BACKUP_SSH_KEY=/root/.ssh/backup_key
BACKUP_RETENTION_DAYS=30
BACKUP_KEEP_LOCAL=false
