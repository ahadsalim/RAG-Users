# ฺฺฉโูุณุช ูุตุจ ุณุฑูุฑ ุฌุฏุฏ โ

ุงู ฺฺฉโูุณุช ุฑุง ูุจู ู ุจุนุฏ ุงุฒ ูุตุจ ุจุฑุฑุณ ฺฉูุฏ.

## ูุจู ุงุฒ ูุตุจ

### 1. ุขูุงุฏูโุณุงุฒ ุณุฑูุฑ

- [ ] ุณุฑูุฑ Ubuntu 20.04+ ุง Debian 11+ ุขูุงุฏู ุงุณุช
- [ ] ุฏุณุชุฑุณ SSH ุจุง ฺฉูุฏ ุนููู ุชูุธู ุดุฏู
- [ ] ุฏุณุชุฑุณ sudo/root ูุฌูุฏ ุฏุงุฑุฏ
- [ ] ุญุฏุงูู 4GB RAM ููุฌูุฏ ุงุณุช
- [ ] ุญุฏุงูู 20GB ูุถุง ุฎุงู ุฏุณฺฉ ููุฌูุฏ ุงุณุช
- [ ] ุณุฑูุฑ ุจู ุงูุชุฑูุช ูุชุตู ุงุณุช

### 2. DNS ู ุฏุงููู

- [ ] ุฏุงููู ุงุตู ุฎุฑุฏุงุฑ ุดุฏู (ูุซูุงู: `yourdomain.com`)
- [ ] ุฑฺฉูุฑุฏ A ุจุฑุง ุฏุงููู ุงุตู ุจู IP ุณุฑูุฑ ุงุดุงุฑู ูโฺฉูุฏ
- [ ] ุฑฺฉูุฑุฏ A ุจุฑุง ุณุงุจโุฏุงูู admin (ูุซูุงู: `admin.yourdomain.com`) ุชูุธู ุดุฏู
- [ ] ุชุบุฑุงุช DNS ููุชุดุฑ ุดุฏู (ูุนูููุงู 1-24 ุณุงุนุช ุทูู ูโฺฉุดุฏ)

### 3. ุงุทูุงุนุงุช ููุฑุฏ ูุงุฒ

- [ ] ุฏุงููู ุงุตู: `__________________`
- [ ] ุงูู ูุฏุฑุช: `__________________`
- [ ] IP ุณุฑูุฑ: `__________________`

### 4. ุงุทูุงุนุงุช API ู ุณุฑูุณโูุง ุฎุงุฑุฌ

- [ ] RAG Core API:
  - [ ] Base URL: `__________________`
  - [ ] API Key: `__________________`
- [ ] JWT Secret Key (ุงุฒ ุณุณุชู ูุฑฺฉุฒ): `__________________`
- [ ] Email SMTP:
  - [ ] Host: `__________________`
  - [ ] Port: `__________________`
  - [ ] Username: `__________________`
  - [ ] Password: `__________________`
- [ ] Zarinpal (ุงุฎุชุงุฑ):
  - [ ] Merchant ID: `__________________`
- [ ] Kavenegar SMS (ุงุฎุชุงุฑ):
  - [ ] API Key: `__________________`
  - [ ] Sender Number: `__________________`
- [ ] Bale Messenger (ุงุฎุชุงุฑ):
  - [ ] Client ID: `__________________`
  - [ ] Client Secret: `__________________`

---

## ุฏุฑ ุญู ูุตุจ

### 1. ุขูพููุฏ ูุงูโูุง

```bash
# ุงุฒ ฺฉุงููพูุชุฑ ูุญู
scp -r /srv your-user@YOUR-SERVER-IP:/tmp/

# ุฑู ุณุฑูุฑ
ssh your-user@YOUR-SERVER-IP
sudo mv /tmp/srv /srv
sudo chown -R $USER:$USER /srv
```

- [ ] ูุงูโูุง ุขูพููุฏ ุดุฏูุฏ
- [ ] ูุงูฺฉุช ูุงูโูุง ุตุญุญ ุงุณุช

### 2. ุงุฌุฑุง ุงุณฺฉุฑูพุช

```bash
cd /srv/deployment
sudo ./start.sh
```

**ุฏุฑ ุญู ุงุฌุฑุง:**

- [ ] ุงุณฺฉุฑูพุช ุจุฏูู ุฎุทุง ุดุฑูุน ุดุฏ
- [ ] ุฏุงููู ูุงุฑุฏ ุดุฏ: `__________________`
- [ ] ุงูู ูุฏุฑุช ูุงุฑุฏ ุดุฏ: `__________________`
- [ ] JWT Secret Key ูุงุฑุฏ ุดุฏ ุง ุชููุฏ ุดุฏ
- [ ] ุณูุงูุงุช ุชุงุฏ ูพุงุณุฎ ุฏุงุฏู ุดุฏูุฏ

**ูุฑุงุญู ูุตุจ:**

- [ ] โ ุณุณุชู ุจูโุฑูุฒุฑุณุงู ุดุฏ
- [ ] โ ุงุจุฒุงุฑูุง ุถุฑูุฑ ูุตุจ ุดุฏูุฏ
- [ ] โ Docker ูุตุจ ุดุฏ
- [ ] โ Docker Compose ูุตุจ ุดุฏ
- [ ] โ UFW Firewall ูพฺฉุฑุจูุฏ ุดุฏ
- [ ] โ ูุงู .env ุงุฌุงุฏ ุดุฏ
- [ ] โ ุดุจฺฉู Docker ุงุฌุงุฏ ุดุฏ
- [ ] โ PostgreSQL ุฑุงูโุงูุฏุงุฒ ุดุฏ
- [ ] โ Redis ุฑุงูโุงูุฏุงุฒ ุดุฏ
- [ ] โ RabbitMQ ุฑุงูโุงูุฏุงุฒ ุดุฏ
- [ ] โ Backend ุฑุงูโุงูุฏุงุฒ ุดุฏ
- [ ] โ Migrations ุงุฌุฑุง ุดุฏูุฏ
- [ ] โ Static files ุฌูุนโุขูุฑ ุดุฏูุฏ
- [ ] โ Superuser ุงุฌุงุฏ ุดุฏ
- [ ] โ Celery ุฑุงูโุงูุฏุงุฒ ุดุฏ
- [ ] โ Frontend ุฑุงูโุงูุฏุงุฒ ุดุฏ
- [ ] โ Nginx Proxy Manager ุฑุงูโุงูุฏุงุฒ ุดุฏ
- [ ] โ Backup ุฎูุฏฺฉุงุฑ ุชูุธู ุดุฏ

---

## ุจุนุฏ ุงุฒ ูุตุจ

### 1. ุจุฑุฑุณ ุงููู

```bash
cd /srv/deployment
docker-compose ps
```

**ููู ุณุฑูุณโูุง ุจุงุฏ ุฏุฑ ูุถุนุช "Up" ุจุงุดูุฏ:**

- [ ] `app_postgres` - Up
- [ ] `app_redis` - Up
- [ ] `app_rabbitmq` - Up
- [ ] `app_backend` - Up
- [ ] `app_celery_worker` - Up
- [ ] `app_celery_beat` - Up
- [ ] `app_frontend` - Up
- [ ] `app_npm` - Up
- [ ] `app_npm_db` - Up

### 2. ุฐุฎุฑู ุงุทูุงุนุงุช ูุญุฑูุงูู

```bash
cat /srv/deployment/config/credentials.txt
```

- [ ] ูุงู credentials ุฑุง ฺฉูพ ฺฉุฑุฏู ู ุฏุฑ ุฌุง ุงูู ุฐุฎุฑู ฺฉุฑุฏุฏ
- [ ] ูพุณูุฑุฏูุง ุฑุง ุงุฏุฏุงุดุช ฺฉุฑุฏุฏ:
  - [ ] PostgreSQL Password: `__________________`
  - [ ] Redis Password: `__________________`
  - [ ] RabbitMQ Password: `__________________`
  - [ ] Django Admin Password: `__________________`
  - [ ] NPM Admin Password: `__________________`

### 3. ุชูุธู ูุงู .env

```bash
nano /srv/deployment/.env
```

**ููุงุฑุฏ ุถุฑูุฑ ฺฉู ุจุงุฏ ุชูุธู ุดููุฏ:**

- [ ] `RAG_CORE_BASE_URL` - ุขุฏุฑุณ ุณุณุชู ูุฑฺฉุฒ
- [ ] `RAG_CORE_API_KEY` - ฺฉูุฏ API ูุงูุน
- [ ] `JWT_SECRET_KEY` - ุจุงุฏ ุจุง ุณุณุชู ูุฑฺฉุฒ ฺฉุณุงู ุจุงุดุฏ
- [ ] `EMAIL_HOST` - SMTP host
- [ ] `EMAIL_HOST_USER` - ุงูู
- [ ] `EMAIL_HOST_PASSWORD` - ูพุณูุฑุฏ ุงูู
- [ ] `ZARINPAL_MERCHANT_ID` - (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู)
- [ ] `KAVENEGAR_API_KEY` - (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู)

ุจุนุฏ ุงุฒ ุชูุธู:
```bash
docker-compose restart backend celery_worker celery_beat
```

### 4. ูพฺฉุฑุจูุฏ Nginx Proxy Manager

- [ ] ุจู ุขุฏุฑุณ `http://YOUR-SERVER-IP:81` ุฑูุชุฏ
- [ ] ุจุง ุงุทูุงุนุงุช ูพุดโูุฑุถ ูุงุฑุฏ ุดุฏุฏ:
  - Email: `admin@example.com`
  - Password: `changeme`
- [ ] ุฑูุฒ ุนุจูุฑ ุฑุง ุชุบุฑ ุฏุงุฏุฏ ุจู password ุฏุงุฎู credentials.txt

**Proxy Host ุจุฑุง Backend:**

- [ ] Proxy Host ุฌุฏุฏ ุงุฌุงุฏ ฺฉุฑุฏุฏ
- [ ] Domain Names: `admin.yourdomain.com`
- [ ] Scheme: `http`
- [ ] Forward Hostname/IP: `backend`
- [ ] Forward Port: `8000`
- [ ] Cache Assets: ุจูู
- [ ] Block Common Exploits: ุจูู
- [ ] Websockets Support: ุจูู
- [ ] SSL Certificate:
  - [ ] Request New SSL Certificate
  - [ ] Force SSL: ุจูู
  - [ ] HTTP/2 Support: ุจูู
  - [ ] HSTS Enabled: ุจูู
- [ ] ฺฏูุงู SSL ุฏุฑุงูุช ุดุฏ

**Proxy Host ุจุฑุง Frontend:**

- [ ] Proxy Host ุฌุฏุฏ ุงุฌุงุฏ ฺฉุฑุฏุฏ
- [ ] Domain Names: `yourdomain.com`, `www.yourdomain.com`
- [ ] Scheme: `http`
- [ ] Forward Hostname/IP: `frontend`
- [ ] Forward Port: `3000`
- [ ] Cache Assets: ุจูู
- [ ] Block Common Exploits: ุจูู
- [ ] Websockets Support: ุจูู
- [ ] SSL Certificate:
  - [ ] Request New SSL Certificate
  - [ ] Force SSL: ุจูู
  - [ ] HTTP/2 Support: ุจูู
  - [ ] HSTS Enabled: ุจูู
- [ ] ฺฏูุงู SSL ุฏุฑุงูุช ุดุฏ

### 5. ุชุณุช ุณุฑูุณโูุง

**Frontend:**
- [ ] `https://yourdomain.com` ุจุงุฒ ูโุดูุฏ
- [ ] ุตูุญู ูุงฺฏู ููุงุด ุฏุงุฏู ูโุดูุฏ
- [ ] Theme switcher ฺฉุงุฑ ูโฺฉูุฏ

**Backend API:**
- [ ] `https://admin.yourdomain.com/api/` ุจุงุฒ ูโุดูุฏ
- [ ] ุตูุญู API root ููุงุด ุฏุงุฏู ูโุดูุฏ

**Django Admin:**
- [ ] `https://admin.yourdomain.com/admin/` ุจุงุฒ ูโุดูุฏ
- [ ] ุจุง username: `admin` ู password ุงุฒ credentials ูุงุฑุฏ ูโุดูุฏ
- [ ] ุฏุงุดุจูุฑุฏ admin ููุงุด ุฏุงุฏู ูโุดูุฏ

**WebSocket:**
- [ ] ฺุช ุฏุฑ frontend ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ูพุงูโูุง real-time ุงุฑุณุงู ูโุดููุฏ

### 6. ุชุณุช ุนููฺฉุฑุฏ

**ุซุจุชโูุงู:**
- [ ] ุซุจุชโูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ุงูู ุชุงุฏ ุงุฑุณุงู ูโุดูุฏ (ุงฺฏุฑ email ุชูุธู ุดุฏู ุจุงุดุฏ)
- [ ] SMS OTP ฺฉุงุฑ ูโฺฉูุฏ (ุงฺฏุฑ SMS ุชูุธู ุดุฏู ุจุงุดุฏ)

**ูุงฺฏู:**
- [ ] ูุฑูุฏ ุจุง username/password ฺฉุงุฑ ูโฺฉูุฏ
- [ ] JWT token ุฏุฑุงูุช ูโุดูุฏ
- [ ] Refresh token ฺฉุงุฑ ูโฺฉูุฏ

**ฺุช:**
- [ ] ุงุฑุณุงู ูพุงู ุจู RAG Core ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ุฏุฑุงูุช ูพุงุณุฎ streaming
- [ ] ุฐุฎุฑู ุชุงุฑุฎฺู ฺุช

**ูพุฑุฏุงุฎุช (ุฏุฑ ุตูุฑุช ุชูุธู):**
- [ ] ุตูุญู ูพุฑุฏุงุฎุช ุจุงุฒ ูโุดูุฏ
- [ ] ุงูุชูุงู ุจู ุฏุฑฺฏุงู ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ุจุงุฒฺฏุดุช ุงุฒ ุฏุฑฺฏุงู ู ุชุงุฏ ฺฉุงุฑ ูโฺฉูุฏ

### 7. ูุงูุชูุฑูฺฏ ู ูุงฺฏโูุง

```bash
# ุจุฑุฑุณ ูุงฺฏโูุง backend
docker-compose logs -f backend --tail=50

# ุจุฑุฑุณ ูุงฺฏโูุง celery
docker-compose logs -f celery_worker --tail=50

# ุจุฑุฑุณ ูุงฺฏโูุง frontend
docker-compose logs -f frontend --tail=50
```

- [ ] ูฺ ุฎุทุง critical ุฏุฑ ูุงฺฏโูุง ูุณุช
- [ ] ุณุฑูุณโูุง ุจู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉููุฏ

### 8. Backup

```bash
# ุชุณุช backup ุฏุณุช
sudo /srv/backups/backup.sh

# ุจุฑุฑุณ ูุงู backup
ls -lh /srv/backups/
```

- [ ] backup ุจุง ููููุช ุงุฌุงุฏ ุดุฏ
- [ ] ูุงู tar.gz ููุฌูุฏ ุงุณุช
- [ ] ุงูุฏุงุฒู ูุงู ููุทู ุงุณุช (ฺูุฏ ูฺฏุงุจุงุช)

### 9. ุงููุช

**Firewall:**
```bash
sudo ufw status
```
- [ ] ููุท ูพูุฑุชโูุง 22, 80, 443, 81 ุจุงุฒ ูุณุชูุฏ

**Updates:**
```bash
sudo apt update
sudo apt list --upgradable
```
- [ ] ุณุณุชู ุจูโุฑูุฒ ุงุณุช

**Docker:**
```bash
docker-compose ps
docker stats --no-stream
```
- [ ] ูุตุฑู ููุงุจุน ูุนููู ุงุณุช

### 10. ูุณุชูุฏุณุงุฒ

- [ ] IP ุณุฑูุฑ ุงุฏุฏุงุดุช ุดุฏ
- [ ] ุงุทูุงุนุงุช DNS ุงุฏุฏุงุดุช ุดุฏ
- [ ] ุชูุงู ูพุณูุฑุฏูุง ุฏุฑ ุฌุง ุงูู ุฐุฎุฑู ุดุฏูุฏ
- [ ] ุฏุณุชุฑุณโูุง SSH ุชูุธู ุดุฏ
- [ ] ุงุทูุงุนุงุช ุชูุงุณ ุชู ูู ุซุจุช ุดุฏ

---

## ูุดฺฉูุงุช ูุชุฏุงูู ู ุฑุงูโุญู

### Backend ุฑุงูโุงูุฏุงุฒ ููโุดูุฏ
```bash
docker-compose logs backend
docker-compose exec backend python manage.py check
```

### Frontend ุฎุทุง ูโุฏูุฏ
```bash
docker-compose logs frontend
docker-compose restart frontend
```

### SSL ุฏุฑุงูุช ููโุดูุฏ
- ุจุฑุฑุณ ฺฉูุฏ DNS ุจู ุฏุฑุณุช ุชูุธู ุดุฏู ุจุงุดุฏ
- ุตุจุฑ ฺฉูุฏ ุชุง DNS ููุชุดุฑ ุดูุฏ (ุชุง 24 ุณุงุนุช)
- ูุทูุฆู ุดูุฏ ูพูุฑุชโูุง 80 ู 443 ุจุงุฒ ูุณุชูุฏ

### Database connection ุฎุทุง ูโุฏูุฏ
```bash
docker-compose exec backend python manage.py dbshell
# ุง
docker-compose exec postgres psql -U app_user -d app_db
```

---

## โ ูุตุจ ฺฉุงูู ุดุฏ!

ุงฺฏุฑ ููู ููุงุฑุฏ ุจุงูุง ฺฺฉ ุดุฏู ุจุงุดูุฏุ ุณุณุชู ุดูุง ุขูุงุฏู ุงุณุชูุงุฏู ุฏุฑ production ุงุณุช! ๐

**ูุฏูโูุง ุจุนุฏ:**
1. ุขููุฒุด ุชู ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุณุณุชู
2. ุฑุงูโุงูุฏุงุฒ monitoring (Sentry, etc.)
3. ุชูุธู backup ุฎุงุฑุฌ ุงุฒ ุณุฑูุฑ
4. ุจุฑูุงููโุฑุฒ ุจุฑุง scale ฺฉุฑุฏู
5. ูุณุชูุฏุณุงุฒ ูุฑุขูุฏูุง ุฏุงุฎู

**ูฺฉุชู ููู:** 
ูุงู `/srv/deployment/config/credentials.txt` ุฑุง ุงุฒ ุณุฑูุฑ ุญุฐู ฺฉูุฏ ุจุนุฏ ุงุฒ ุงูฺฉู ุงุทูุงุนุงุช ุฑุง ุฏุฑ ุฌุง ุงูู ุฐุฎุฑู ฺฉุฑุฏุฏ:
```bash
sudo rm /srv/deployment/config/credentials.txt
```
