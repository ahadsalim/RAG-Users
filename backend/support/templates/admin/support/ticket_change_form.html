{% extends "admin/change_form.html" %}
{% load i18n admin_urls static ticket_tags %}

{% block extrahead %}
{{ block.super }}
<style>
    /* حذف ستون سوم */
    .col-12.col-lg-3,
    #jazzy-actions,
    .submit-row {
        display: none !important;
    }
    
    /* تمام عرض برای ستون وسط */
    .col-12.col-lg-9 {
        flex: 0 0 100% !important;
        max-width: 100% !important;
    }
    
    /* حذف label و تمام عرض برای محتوا */
    .form-group .row > label {
        display: none !important;
    }
    
    .form-group .row > div {
        flex: 0 0 100% !important;
        max-width: 100% !important;
    }
    
    .readonly {
        width: 100% !important;
    }
</style>
{% endblock %}

{% block field_sets %}
<div class="col-12">
    {% render_ticket_info %}
    {% render_ticket_messages %}
    {% render_ticket_reply_form %}
</div>

<script>
function toggleForwardedTo(messageType) {
    var field = document.getElementById('forwarded_to_field');
    if (messageType === 'send_to') {
        field.style.display = 'block';
    } else {
        field.style.display = 'none';
    }
}

document.addEventListener('DOMContentLoaded', function() {
    var selectedType = document.querySelector('input[name="message_type"]:checked');
    if (selectedType) {
        toggleForwardedTo(selectedType.value);
    }
});
</script>
{% endblock %}
