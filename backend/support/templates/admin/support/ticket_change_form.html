{% extends "admin/change_form.html" %}
{% load i18n admin_urls static %}

{% block extrahead %}
{{ block.super }}
<style>
    /* حذف ستون سوم و تمام عرض برای محتوا */
    .col-12.col-lg-9 {
        flex: 0 0 100% !important;
        max-width: 100% !important;
    }
    
    .col-12.col-lg-3 {
        display: none !important;
    }
    
    .submit-row,
    #jazzy-actions {
        display: none !important;
    }
</style>
{% endblock %}

{% block field_sets %}
{% if adminform %}
    {% for fieldset in adminform %}
        <fieldset class="module aligned">
            {% for line in fieldset %}
                <div class="form-row{% if line.fields|length_is:'1' and line.errors %} errors{% endif %}">
                    {% for field in line %}
                        <div style="width: 100%;">
                            {% if field.is_readonly %}
                                <div class="readonly">{{ field.contents }}</div>
                            {% else %}
                                {{ field.field }}
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </fieldset>
    {% endfor %}
{% endif %}
        
        <script>
        function toggleForwardedTo(messageType) {
            var field = document.getElementById('forwarded_to_field');
            if (messageType === 'send_to') {
                field.style.display = 'block';
            } else {
                field.style.display = 'none';
            }
        }
        
        // اجرای اولیه
        document.addEventListener('DOMContentLoaded', function() {
            var selectedType = document.querySelector('input[name="message_type"]:checked');
            if (selectedType) {
                toggleForwardedTo(selectedType.value);
            }
        });
        </script>
{% else %}
    {# فرم ایجاد تیکت جدید غیرفعال است #}
    <div style="padding: 40px; text-align: center;">
        <p style="font-size: 18px; color: #6b7280;">ایجاد تیکت از پنل ادمین غیرفعال است.</p>
    </div>
{% endif %}
{% endblock %}
