{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">{{ title }}</h3>
    </div>
    <div class="card-body p-0">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>کاربر</th>
                    <th>پلن</th>
                    <th>توکن ورودی</th>
                    <th>توکن خروجی</th>
                    <th>مانده سوال</th>
                    <th>مانده روز</th>
                    <th>تاریخ عضویت</th>
                </tr>
            </thead>
            <tbody>
                {% for item in users_data %}
                <tr>
                    <td>
                        <strong>{{ item.user.get_full_name|default:item.user.phone_number }}</strong>
                        <br><small class="text-muted">{{ item.user.phone_number|default:item.user.email }}</small>
                    </td>
                    <td>{{ item.plan_name }}</td>
                    <td>{{ item.input_tokens|intcomma }}</td>
                    <td>{{ item.output_tokens|intcomma }}</td>
                    <td>{{ item.remaining_queries }}</td>
                    <td>{{ item.remaining_days }} روز</td>
                    <td>{{ item.date_joined|date:"Y/m/d" }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center">هیچ کاربری یافت نشد</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
